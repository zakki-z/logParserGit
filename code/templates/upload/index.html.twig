{% extends 'base.html.twig' %}

{% block title %}Upload Log File{% endblock %}

{% block body %}
    <div class="min-h-screen py-12 px-4 flex items-center justify-center">
        <div class="max-w-2xl mx-auto w-full">
            <div class="bg-white rounded-lg overflow-hidden">
                <div class="bg-blue-600 px-6 py-4">
                    <h3 class="text-2xl font-bold text-white">Upload Log File</h3>
                </div>
                <div class="p-16">
                    {% for message in app.flashes('success') %}
                        <div class="alert alert-success bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4 relative" role="alert">
                            {{ message }}
                            <button type="button" class="absolute top-0 right-0 px-4 py-3" data-bs-dismiss="alert">
                                <span class="text-2xl">&times;</span>
                            </button>
                        </div>
                    {% endfor %}

                    {% for message in app.flashes('error') %}
                        <div class="alert alert-danger bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 relative" role="alert">
                            {{ message }}
                            <button type="button" class="absolute top-0 right-0 px-4 py-3" data-bs-dismiss="alert">
                                <span class="text-2xl">&times;</span>
                            </button>
                        </div>
                    {% endfor %}

                    <form method="post" action="{{ path('app_upload') }}" enctype="multipart/form-data" class="space-y-4">
                        {{ form_start(form, {'attr': {'class': 'space-y-4'}}) }}

                        <div class="form-group">
                            {{ form_label(form.log_file, null, {'label_attr': {'class': 'block text-gray-700 font-medium mb-2'}}) }}
                            {{ form_widget(form.log_file) }}
                            {{ form_errors(form.log_file) }}
                            <div class="text-sm text-gray-600 mt-2">
                                Allowed formats: .log, .txt (Max size: 10MB)
                            </div>
                        </div>

                        <div>
                            {{ form_widget(form.submit) }}
                        </div>

                        {{ form_end(form) }}
                    </form>

                    <hr class="my-6 border-gray-300">

                    <div>
                        <a href="{{ path('app_log_view') }}" class="inline-block text-blue-600 hover:text-blue-800 font-medium">
                            View My Uploaded Files â†’
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
